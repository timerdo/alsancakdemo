<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>3D Alsancak Tribün Simülatörü</title>
    <style>
        body { margin: 0; background-color: #050505; color: white; font-family: sans-serif; overflow: hidden; }
        #ui {
            position: absolute; top: 20px; left: 20px; z-index: 100;
            background: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px; border: 1px solid #d71920;
        }
        .stats { font-size: 24px; color: #d71920; font-weight: bold; }
        .controls { margin-top: 10px; }
        button { background: #d71920; color: white; border: none; padding: 10px 15px; cursor: pointer; border-radius: 5px; }
        canvas { display: block; }
    </style>
</head>
<body>

<div id="ui">
    <div style="font-size: 12px; letter-spacing: 2px;">CANLI BAĞIŞ DURUMU</div>
    <div class="stats">SMS Sayısı: <span id="count">0</span></div>
    <div class="controls">
        <button onclick="simulateSMS()">+10 SMS Gönder</button>
    </div>
    <p style="font-size: 11px; opacity: 0.7;">Farenizle tribünü döndürebilir ve yakınlaşabilirsiniz.</p>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

<script>
    let scene, camera, renderer, controls;
    let seats = [];
    let currentSms = 0;

    function init() {
        // 1. Sahne ve Kamera
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 30, 60);

        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // 2. Işıklandırma
        const light = new THREE.DirectionalLight(0xffecb3, 1);
        light.position.set(10, 20, 10);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // 3. Orbit Controls (Fare ile döndürme)
        controls = new THREE.OrbitControls(camera, renderer.domElement);

        // 4. Tribün Oluşturma (Eğimli ve Basamaklı)
        const rows = 25; // Sıra sayısı
        const cols = 60; // Yan yana koltuk
        const seatGeometry = new THREE.BoxGeometry(0.8, 0.4, 0.8);
        const whiteMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });

        for (let r = 0; r < rows; r++) {
            for (let c = 0; c < cols; c++) {
                const seat = new THREE.Mesh(seatGeometry, whiteMaterial.clone());
                
                // Matematiksel olarak tribün eğimi veriyoruz
                seat.position.x = (c - cols / 2) * 1.1;
                seat.position.y = r * 0.8; // Her sıra yükseliyor
                seat.position.z = r * 1.2; // Her sıra arkaya gidiyor

                scene.add(seat);
                seats.push(seat);
            }
        }

        // Zemin (Yeşil Saha Temsili)
        const pitchGeo = new THREE.PlaneGeometry(100, 60);
        const pitchMat = new THREE.MeshBasicMaterial({ color: 0x1a3300, side: THREE.DoubleSide });
        const pitch = new THREE.Mesh(pitchGeo, pitchMat);
        pitch.rotation.x = Math.PI / 2;
        pitch.position.y = -1;
        scene.add(pitch);

        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
    }

    function simulateSMS() {
        currentSms += 10;
        document.getElementById('count').innerText = currentSms;
        updateSeats();
    }

    function updateSeats() {
        const redMaterial = new THREE.MeshPhongMaterial({ 
            color: 0xd71920, 
            emissive: 0x500000, // Hafif parlama efekti
            shininess: 100 
        });

        for (let i = 0; i < currentSms; i++) {
            if (seats[i] && seats[i].material.color.getHex() === 0xffffff) {
                seats[i].material = redMaterial;
            }
        }
    }

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });

    init();
</script>
</body>
</html>
