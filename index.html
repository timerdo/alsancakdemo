<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>İzmir 3D Digital Venue - 10K Stadyum</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87CEEB; font-family: 'Arial', sans-serif; }
        #ui-panel { position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.7); color: white; padding: 20px; border-radius: 10px; border-left: 5px solid #ff0000; }
        #sms-btn { position: absolute; bottom: 30px; right: 30px; padding: 20px 40px; background: #ff0000; color: white; border: none; border-radius: 50px; font-size: 18px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s; }
        #sms-btn:hover { transform: scale(1.1); background: #cc0000; }
        canvas { display: block; }
    </style>
</head>
<body>

<div id="ui-panel">
    <h2>İzmir Dijital Stadyum</h2>
    <p>Kapasite: 10.000</p>
    <p>Dolu (SMS): <span id="count" style="color: #ff0000; font-size: 24px;">0</span></p>
    <p style="font-size: 12px;">Fare ile döndürün / Tekerlek ile yakınlaşın</p>
</div>

<button id="sms-btn" onclick="sendSMS()">SMS GÖNDER</button>

<script type="importmap">
    { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js", "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/" } }
</script>

<script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

    // SAHNE VE KAMERA
    const scene = new THREE.Scene();
    // Arka planı İzmir mavisi (gökyüzü) yapıyoruz
    scene.background = new THREE.Color(0x87CEEB); 

    const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(80, 60, 80);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    document.body.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    // IŞIKLANDIRMA (Güneşli Hava)
    const sunLight = new THREE.DirectionalLight(0xffffff, 1.5);
    sunLight.position.set(50, 100, 50);
    sunLight.castShadow = true;
    scene.add(sunLight);
    scene.add(new THREE.AmbientLight(0xffffff, 0.6));

    // SAHA (Çim)
    const pitchGeo = new THREE.PlaneGeometry(60, 90);
    const pitchMat = new THREE.MeshLambertMaterial({ color: 0x228B22 });
    const pitch = new THREE.Mesh(pitchGeo, pitchMat);
    pitch.rotation.x = -Math.PI / 2;
    scene.add(pitch);

    // 10.000 KOLTUK OLUŞTURMA (Beyaz)
    const allSeats = [];
    const seatGeo = new THREE.BoxGeometry(0.6, 0.6, 0.6);
    
    function buildStand(x, z, rows, cols, rotY) {
        const stand = new THREE.Group();
        for(let r=0; r<rows; r++) {
            for(let c=0; c<cols; c++) {
                const material = new THREE.MeshLambertMaterial({ color: 0xffffff }); // BEYAZ KOLTUK
                const seat = new THREE.Mesh(seatGeo, material);
                seat.position.set(c * 0.8 - (cols*0.4), r * 0.7, r * 0.9);
                stand.add(seat);
                allSeats.push(seat);
            }
        }
        stand.position.set(x, 0, z);
        stand.rotation.y = rotY;
        scene.add(stand);
    }

    // Dört tarafı tribünle çevir (Yaklaşık 10.000 koltuk kapasitesi)
    buildStand(0, -55, 30, 85, 0);          // Kuzey
    buildStand(0, 55, 30, 85, Math.PI);     // Güney
    buildStand(-45, 0, 30, 60, Math.PI/2);  // Batı
    buildStand(45, 0, 30, 60, -Math.PI/2); // Doğu

    // SMS FONKSİYONU
    let filled = 0;
    window.sendSMS = function() {
        if (filled < allSeats.length) {
            // Her tıklamada rastgele 20 koltuğu kırmızı yap
            for(let i=0; i<20; i++){
                const idx = Math.floor(Math.random() * allSeats.length);
                allSeats[idx].material.color.setHex(0xff0000); 
            }
            filled += 20;
            document.getElementById('count').innerText = filled;
        }
    }

    // ANİMASYON
    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        renderer.render(scene, camera);
    }
    animate();

    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
</script>
</body>
</html>
